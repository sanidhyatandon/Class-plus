{"ast":null,"code":"var _jsxFileName = \"/Users/santando/class~plus/src/containers/Photos/index.js\";\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport apiConfig from '../../api.config';\nimport PhotoView from '../../components/Photos';\nimport { debounce, throttle } from '../../common/utilities';\n\nconst Photos = () => {\n  const [photos, setPhotos] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [isOpen, setIsOpen] = useState(false);\n  const [page, setPage] = useState(1);\n  const [photoClickData, setpPhotoClickData] = useState([]);\n  const resultsRef = useRef(null);\n\n  const handleScroll = () => {\n    if (resultsRef.current && window.pageYOffset + window.innerHeight > resultsRef.current.clientHeight - window.outerHeight * 0.3) {\n      setPage(page => page + 1);\n    }\n  };\n\n  useEffect(() => {\n    resultsRef.current.addEventListener('scroll', throttle(handleScroll, 1000));\n    return () => window.removeEventListener('scroll', throttle(handleScroll, 1000));\n  }, []);\n  useEffect(() => {\n    const {\n      getPhotos: {\n        url: getPhotosURL\n      }\n    } = apiConfig;\n    fetch(`${getPhotosURL}&per_page=10&page=${page}&format=json&nojsoncallback=1`).then(response => response.json()).then(photoList => setPhotos(photoList)).catch(error => console.log(error));\n  }, [page]);\n\n  const searchPhotos = () => {\n    console.log('hi');\n    const {\n      searchPhotos: {\n        url: searchPhotosURL\n      }\n    } = apiConfig;\n    fetch(`${searchPhotosURL}&per_page=10&text=${searchTerm}&format=json&nojsoncallback=1`).then(response => response.json()).then(photoList => setPhotos(photoList)).catch(error => console.log(error));\n  };\n\n  const debouncedCount = useCallback(debounce(searchPhotos, 1000), []);\n\n  const handleSearch = event => {\n    if (searchTerm.length < 3) {\n      setSearchTerm(event.target.value);\n    }\n\n    debouncedCount();\n  };\n\n  const handleModalClose = () => {\n    setIsOpen(false);\n  };\n\n  const photoClickHandler = (event, data) => {\n    setIsOpen(isOpen => !isOpen);\n    setpPhotoClickData(data);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"photo-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PhotoView, {\n    ref: resultsRef,\n    photoList: photos,\n    isOpen: isOpen,\n    handleSearch: handleSearch,\n    onPhotoClick: photoClickHandler,\n    onModalClose: handleModalClose,\n    photoClickData: photoClickData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default Photos;","map":{"version":3,"sources":["/Users/santando/class~plus/src/containers/Photos/index.js"],"names":["React","useState","useEffect","useCallback","useRef","apiConfig","PhotoView","debounce","throttle","Photos","photos","setPhotos","searchTerm","setSearchTerm","isOpen","setIsOpen","page","setPage","photoClickData","setpPhotoClickData","resultsRef","handleScroll","current","window","pageYOffset","innerHeight","clientHeight","outerHeight","addEventListener","removeEventListener","getPhotos","url","getPhotosURL","fetch","then","response","json","photoList","catch","error","console","log","searchPhotos","searchPhotosURL","debouncedCount","handleSearch","event","length","target","value","handleModalClose","photoClickHandler","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\n\nimport apiConfig from '../../api.config';\nimport PhotoView from '../../components/Photos';\nimport { debounce, throttle } from '../../common/utilities';\n\nconst Photos = () => {\n  const [photos, setPhotos] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [isOpen, setIsOpen] = useState(false);\n  const [page, setPage] = useState(1);\n  const [photoClickData, setpPhotoClickData] = useState([]);\n\n  const resultsRef = useRef(null);\n\n  const handleScroll = () => {\n    if (\n      resultsRef.current &&\n      window.pageYOffset + window.innerHeight > resultsRef.current.clientHeight - window.outerHeight * 0.3\n    ) {\n      setPage(page => page + 1);\n    }\n  };\n\n  useEffect(() => {\n    resultsRef.current.addEventListener('scroll', throttle(handleScroll, 1000));\n    return () => window.removeEventListener('scroll', throttle(handleScroll, 1000));\n  }, []);\n\n  useEffect(() => {\n    const {\n      getPhotos: { url: getPhotosURL }\n    } = apiConfig;\n    fetch(`${getPhotosURL}&per_page=10&page=${page}&format=json&nojsoncallback=1`)\n      .then(response => response.json())\n      .then(photoList => setPhotos(photoList))\n      .catch(error => console.log(error));\n  }, [page]);\n\n  const searchPhotos = () => {\n    console.log('hi');\n    const {\n      searchPhotos: { url: searchPhotosURL }\n    } = apiConfig;\n\n    fetch(`${searchPhotosURL}&per_page=10&text=${searchTerm}&format=json&nojsoncallback=1`)\n      .then(response => response.json())\n      .then(photoList => setPhotos(photoList))\n      .catch(error => console.log(error));\n  };\n\n  const debouncedCount = useCallback(debounce(searchPhotos, 1000), []);\n\n  const handleSearch = event => {\n    if (searchTerm.length < 3) {\n      setSearchTerm(event.target.value);\n    }\n    debouncedCount();\n  };\n\n  const handleModalClose = () => {\n    setIsOpen(false);\n  };\n\n  const photoClickHandler = (event, data) => {\n    setIsOpen(isOpen => !isOpen);\n    setpPhotoClickData(data);\n  };\n\n  return (\n    <div>\n      <div className=\"photo-list\">\n        {\n          <PhotoView\n            ref={resultsRef}\n            photoList={photos}\n            isOpen={isOpen}\n            handleSearch={handleSearch}\n            onPhotoClick={photoClickHandler}\n            onModalClose={handleModalClose}\n            photoClickData={photoClickData}\n          />\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default Photos;\n"]},"metadata":{},"sourceType":"module"}